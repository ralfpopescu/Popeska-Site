<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>The HTML5 Herald</title>
  <meta name="description" content="I Am Popeska">

  <link href="css/style.css" rel="stylesheet" type="text/css" />
  <script src="js/TweenMax.js"></script>
  <script src="js/jquery-3.1.0.js"></script>

</head>

<body>
  <iframe width="0" height="0" border="0" name="dummyframe" id="dummyframe"></iframe>
  <form action='/featherclick' method="post" id="download" target="dummyframe">
    <input type="text" name="key" value="Hi"/>
  </form>
<div class="container">
  <div class="albumArt" id = "leftArt">
    <img src="img/Assets/wolf.png" id = "leftPic"/>
  </div>
  <div class="albumArt" id = "rightArt">
    <img src="img/Assets/phoenix.png" id = "rightPic"/>
  </div>
  <div class="hero">

    <div class ="circles-container">
      <div id = "c1" class ="circle"> </div>
      <div id = "c2" class ="circle"> </div>
      <div id = "c3" class ="circle"> </div>
      <div id = "c4" class ="circle"> </div>
      <div id = "c5" class ="circle"> </div>
      <div id = "c6" class ="circle"> </div>
      <div id = "c7" class ="circle"> </div>
      <div id = "c8" class ="circle"> </div>

      <div class="largerCircle"> </div>
      <div class ="feather">
        <img src="img/feather.png" id = "Feather"/>
      </div>
    </div>

    <div class="logo-nav">
      <img src="img/popeska_logo.png" id = "Logo"/>
      <div class="nav">
        <div class="nav-item" id = "ListenNav">
          Listen
        </div>
        <div class="nav-item" id = "ConnectNav">
          Connect
        </div>
        <div class="nav-item" id = "InquireNav">
          Inquire
        </div>
        <div class="nav-item" id = "LearnNav">
          Learn
        </div>
        <div class="icons" id = "listen-icons">
          <a href="https://soundcloud.com/popeska" target="_blank"><div class="nav-icon"><img src="img/soundcloud.png" id = "SoundCloudLogo"/></div></a>
          <a href="https://open.spotify.com/artist/4Td7DjmnDqvSDBHtuJomoF" target="_blank"><div class="nav-icon"><img src="img/spotify.png" id = "SpotifyLogo"/></div></a>
          <a href="https://www.youtube.com/watch?v=W0v9n5RQRto" target="_blank"><div class="nav-icon"><img src="img/youtube.png" id = "YoutubeLogo"/></div></a>
        </div>
        <div class="icons" id = "connect-icons">
          <a href="https://twitter.com/Popeska" target="_blank"><div class="nav-icon"><img src="img/twitter.png" id = "TwitterLogo"/></div></a>
          <a href="https://www.facebook.com/popeskamusic/" target="_blank"><div class="nav-icon"><img src="img/fb.png" id = "FacebookLogo"/></div></a>
          <a href="https://www.instagram.com/popeska/" target="_blank"><div class="nav-icon"><img src="img/instagram.png" id = "InstagramLogo"/></div></a>
        </div>
        <form action='/inquiry' method="post" id ="emailForm">
          <input type="text" name="firstname" value="Email" id = "email"><br>
          <textarea name="lastname" value="Inquiry" id = "inquiry"></textarea><br><br>
          <input type="submit" value="Submit" id = "submit">
        </form>
        <div class="textList" id = "learnList">
          <div class ="learnItem" id = "about">About Popeska </div>
          <div class ="learnItem" id = "services">Services </div>
          <div class ="learnItem" id = "photoGallery">Photo Gallery </div>
          <div class ="learnItem" id = "resume"><a href="img/Assets/RALF_MICHAEL_POPESCU_RESUME.pdf" target="_blank">Résumé</a> </div>
        </div>
        <div class="textList" id = "servicesText">
          Available Services to Inquire:<br>
          Mix/Mastering. Rate: 150/track for mix/master. 50 for master.<br>
          Remixing. Negotiable rates and conditions.<br>
          Production. Negotiable rates and conditions.<br>
          Booking. Negotiable rates and conditions.<br>
          Personal Lessons. 120/hour. Must be in Atlanta.<br>
          Skype Lessons. 85/hour.<br>
        <div class="textList" id = "aboutText">
          Ralf Popescu's moniker "Popeska" was born in the early explosion of electronic dance music back in 2009, and since then
          he has consistently challenged the status quo of music production with unique and sonically addicting material.
          Though he has toured internationally, playing festivals like EDC Las Vegas, TomorrowWorld, Nocturnal Wonderland,
          and dozens more, nowadays he prefers to hone his craft and provide his production services in the comfort of his home city of Atlanta.
          As a Sony/ATV producer and writer who has collaborated with clients such as the SuperBowl, Bose, Major League Soccer,
          EA Games, and a diverse collection of major label artists, Popeska is no stranger to professional quality production.
          Now, he is happy to extend his services to a broader customer base, as his passion for music production drives him to work
          on all types of music from musicians of all walks of life and skill levels. <br><br>
          In addition to music production, Ralf Popescu is extraordinarily passionate in the realm of computer science.
          As a student of Georgia Institute of Technology, he has developed his skills as a software engineer and problem solver
          through studies and many projects, including this website. His experience ranges from low level computing to machine
          learning to web development, ad he continually searches for new and challenging problems to solve.
        </div>

        <div id = "backArrow">
          <
        </div>
      </div>
    </div>

  </div>
</div>


  <script>


$(document).ready(function(){
  var $logo = $("#Logo");
  var $container = $("#container");
  var $circles = $(".circle");
  var $circlesContainer = $(".circles-container");
  var $hero = $(".hero");
  var $logoNav = $(".logo-nav");
  var $feather = $(".feather");
  var $largerCircles = $(".largerCircle");

  var activated = [0,0,0,0,0,0,0,0];
  var fadeColors = ['#fff4e0', '#dceffc', '#e4ffd5', '#fafed8'];
  var arts = ["img/Assets/phoenix.png","img/Assets/wolf.png","/img/Assets/elephant.png","img/Assets/owl.png"];
  var time = 2000;

  fadeIn($("#leftArt"), 3);


  colorTransition(document.body, fadeColors, time);
  artTransition(arts, time);

  fadeIn($hero,1);

  $("#ListenNav").hover(function(){
    $("#listen-icons").show();
    $("#connect-icons").hide();
    $("#emailForm").hide();
    $("#learnList").hide();
  }, function(){
    //$("#listen-icons").hide();
  }
);

$("#ConnectNav").hover(function(){
  $("#listen-icons").hide();
  $("#connect-icons").show();
  $("#emailForm").hide();
  $("#learnList").hide();
}, function(){
  //$("#listen-icons").hide();
}
);

$("#InquireNav").hover(function(){
  $("#listen-icons").hide();
  $("#connect-icons").hide();
  $("#emailForm").show();
  $("#learnList").hide();
}, function(){
  //$("#listen-icons").hide();
}
);

$("#LearnNav").hover(function(){
  $("#listen-icons").hide();
  $("#connect-icons").hide();
  $("#emailForm").hide();
  $("#learnList").show();
}, function(){
  //$("#listen-icons").hide();
}
);

$("#about").on("click", function(){
  $("#learnList").hide();
  fadeIn($("#servicesText"), 2);
  fadeIn($("#backArrow"), 2);
  fadeOutAndHide($("#leftArt"), 2);
  fadeOutAndHide($("#rightArt"), 2);
});
$("#services").on("click", handleLogoClick);
$("#photoGallery").on("click", handleLogoClick);
//$("#resume").on("click", handleLogoClick);

$("#backArrow").on("click", function(){
   $("#learnList").show();
   $("#servicesText").hide();
   $("#backArrow").hide();
});


  function colorTransition(element, colors, time){
    var curCol = 0,
          timer = setInterval(function () {
              if (curCol === colors.length) curCol = 0;
              $(element).css("background-color", colors[curCol]);
              curCol++;
          }, time);
  }

  function artTransition(arts, time){
        var curArt = 0;

          timer = setInterval(function () {
              if (curArt === arts.length) curArt = 0;
              var parity = curArt % 2;
              var div;
              if(parity == 1){
                $("#leftPic").attr('src',arts[curArt]);
                fadeIn($("#leftArt"), 1);
                fadeOut($("#rightArt"), 1);
              } else {
                $("#rightPic").attr('src',arts[curArt]);
                fadeIn($("#rightArt"), 1);
                fadeOut($("#leftArt"), 1);
              }
              curArt++;
          }, time);
  }

  function handleLogoClick(){
    nestedFade($logoNav, .7);
    // radialExpand($circles, 170, 1, .1);
    // rotate($circlesContainer, 360, 1);
    activated = [0,0,0,0,0,0,0,0];

  }
  function handleFeatherClick(){

    rotate($circlesContainer, -360, 6);
    reverseRadialExpand($circles, 170, 4, 0);
    //fadeOut($feather, .5);
    fadeOut($circles, .5);

    TweenMax.to($feather, .5, {
      opacity: 0,
      ease: Linear.easeNone,
      onComplete: function(){
        slideUp($hero, 100, .7);
        fadeIn($logoNav,2);
      }
    })



    //var downloadForm = $('#download');
    console.log(JSON.stringify(activated));
    $('input[name="key"]').val(JSON.stringify(activated));
    $('#download').submit();


  }

  function handleCircleClick($element){
      flash($element)
      $($element).css({backgroundColor: 'red'});
      //highlightCircle($element)
      var id = $element.id;
      var num_id = parseInt(id.charAt(1));
      var num_id = num_id - 1;
      activated[num_id] = Number(!activated[num_id]); //flips bit of circle id, -1 because ids start at 1
      if(activated[num_id]){
        $($element).css({backgroundColor: 'black'});
      } else {
        $($element).css({backgroundColor: 'transparent'});
      }

      console.log(activated);
    }

    function highlightCircle($element){
      TweenMax.to($largerCircle, duration, {
        x: $element.position().left,
        y: $element.position().top,
        ease: Back.easeOut,
        delay: stagger * counter,
        opacity:1
      })
  }

  function flash($element){
    TweenMax.to($element, .1, {
      opacity: 0,
      ease: Linear.easeNone,
      onComplete: function(){
        TweenMax.to($element, .1, {
          opacity: 1,
          ease: Linear.easeNone
        })
      }
    })
  }


  function slideDown($element, distance, duration){
    TweenMax.to($element, duration, {
      y: distance,
      ease: Power1.easeInOut,
      onComplete:function(){
        $element.hide();
      }
    })
    fadeOut($element, duration)
  }
  function slideUp($element, distance, duration){
    TweenMax.from($element, duration, {
      y: distance,
      ease: Power1.easeIn
    })
  }
  function fadeOut($element, duration){
    TweenMax.to($element, duration, {
      opacity: 0,
      ease: Linear.easeNone
    })
  }

  function fadeOutAndHide($element, duration){
    TweenMax.to($element, duration, {
      opacity: 0,
      ease: Linear.easeNone,
      onComplete:function(){
        $element.hide();
      }
    })
  }

  function nestedFade($element, duration){
    TweenMax.to($element, duration, {
      opacity: 0,
      ease: Linear.easeNone,
      onComplete:function(){
        $element.hide();
        $feather.show();
        fadeIn($feather, 1);
        radialExpand($circles, 170, 1, .1);
        rotate($circlesContainer, 360, 1);
      }
    })
  }

  function fadeIn($element, duration){
    $element.show();
    TweenMax.to($element, duration, {
      opacity: 1,
      ease: Linear.easeNone
    })
  }

  function rotate($element, rotation, duration){
    TweenMax.to($element, duration, {
      rotation: rotation,
      ease: Back.easeOut
    })
  }

  function rotateAndHide($element, rotation, duration){
    TweenMax.to($element, duration, {
      rotation: rotation,
      ease: Back.easeOut,
      onComplete:function(){
        $element.hide();
      }
    })
  }



  function radialExpand($elements, distance, duration, stagger){
    var counter = 0;
    var degrees = 360;
    var length = $elements.length;
    var step = degrees/length;


    $elements.each(function(){
      var $element = $(this);
      var rotation = step * counter;
      var radians = rotation / 180 * Math.PI;

      var xtrans =  Math.cos(radians) * distance;
      var ytrans =  Math.sin(radians) * distance;

      TweenMax.to($element, duration, {
        x: xtrans,
        y: ytrans,
        ease: Back.easeOut,
        delay: stagger * counter,
        opacity:1
      })
      counter++;
    });
  }
  function reverseRadialExpand($elements, distance, duration, stagger){
    var counter = 0;
    var degrees = 360;
    var length = $elements.length;
    var step = degrees/length;

    $elements.each(function(){
      var $element = $(this);
      var rotation = step * counter;
      var radians = rotation / 180 * Math.PI;

      var xtrans =  -(Math.cos(radians) * distance)/4;
      var ytrans =  -(Math.sin(radians) * distance)/4;

      TweenMax.to($element, duration, {
        x: xtrans,
        y: ytrans,
        ease: Back.easeOut,
        delay: stagger * counter,
        opacity:1
      })
      counter++;
    });

  }
  $logo.on("click", handleLogoClick);
  $feather.on("click", handleFeatherClick);

  $circles.on("click", function(){
    handleCircleClick(this)
  });



})


  </script>

</body>
</html>
