<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>The HTML5 Herald</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">

  <link href="css/style.css" rel="stylesheet" type="text/css" />
  <script src="js/TweenMax.js"></script>
  <script src="js/jquery-3.1.0.js"></script>

</head>

<body>
  <form action='/featherclick' method="post" id="download">
    <input type="text" name="key" value="Hi"/>
  </form>
<div class="container">
  <div class="albumArt" id = "leftArt">
    <img src="img/Assets/wolf.png" id = "leftPic"/>
  </div>
  <div class="albumArt" id = "rightArt">
    <img src="img/Assets/phoenix.png" id = "rightPic"/>
  </div>
  <div class="hero">

    <div class ="circles-container">
      <div id = "c1" class ="circle"> </div>
      <div id = "c2" class ="circle"> </div>
      <div id = "c3" class ="circle"> </div>
      <div id = "c4" class ="circle"> </div>
      <div id = "c5" class ="circle"> </div>
      <div id = "c6" class ="circle"> </div>
      <div id = "c7" class ="circle"> </div>
      <div id = "c8" class ="circle"> </div>

      <div class="largerCircle"> </div>
      <div class ="feather">
        <img src="img/feather.png" id = "Feather"/>
      </div>
    </div>

    <div class="logo-nav">
      <img src="img/popeska_logo.png" id = "Logo"/>
      <div class="nav">
        <div class="nav-item" id = "ListenNav">
          Listen
        </div>
        <div class="nav-item" id = "ConnectNav">
          Connect
        </div>
        <div class="nav-item" id = "InquireNav">
          Inquire
        </div>
        <div class="nav-item" id = "LearnNav">
          Learn
        </div>
        <div class="icons" id = "listen-icons">
          <a href="https://soundcloud.com/popeska"><div class="nav-icon"><img src="img/soundcloud.png" id = "SoundCloudLogo"/></div></a>
          <a href="https://open.spotify.com/artist/4Td7DjmnDqvSDBHtuJomoF"><div class="nav-icon"><img src="img/spotify.png" id = "SpotifyLogo"/></div></a>
          <a href="https://www.youtube.com/watch?v=W0v9n5RQRto"><div class="nav-icon"><img src="img/youtube.png" id = "YoutubeLogo"/></div></a>
        </div>
        <div class="icons" id = "connect-icons">
          <a href="https://twitter.com/Popeska"><div class="nav-icon"><img src="img/twitter.png" id = "TwitterLogo"/></div></a>
          <a href="https://www.facebook.com/popeskamusic/"><div class="nav-icon"><img src="img/fb.png" id = "FacebookLogo"/></div></a>
          <a href="https://www.facebook.com/"><div class="nav-icon"><img src="img/instagram.png" id = "InstagramLogo"/></div></a>
        </div>
        <form action='/inquiry' method="post" id ="emailForm">
          <input type="text" name="firstname" value="Email" id = "email"><br>
          <textarea name="lastname" value="Inquiry" id = "inquiry"></textarea><br><br>
          <input type="submit" value="Submit" id = "submit">
        </form>
      </div>
    </div>

  </div>
</div>


  <script>


$(document).ready(function(){
  var $logo = $("#Logo");
  var $container = $("#container");
  var $circles = $(".circle");
  var $circlesContainer = $(".circles-container");
  var $hero = $(".hero");
  var $logoNav = $(".logo-nav");
  var $feather = $(".feather");
  var $largerCircles = $(".largerCircle");

  var activated = [0,0,0,0,0,0,0,0];
  var fadeColors = ['#fff4e0', '#dceffc', '#e4ffd5', '#fafed8'];
  var arts = ["img/Assets/phoenix.png","img/Assets/wolf.png","/img/Assets/elephant.png","img/Assets/owl.png"];
  var time = 2000;

  fadeIn($("#leftArt"), 3);


  colorTransition(document.body, fadeColors, time);
  artTransition(arts, time);

  fadeIn($hero,1);

  $("#ListenNav").hover(function(){
    $("#listen-icons").show();
    $("#connect-icons").hide();
    $("#emailForm").hide();
  }, function(){
    //$("#listen-icons").hide();
  }
);

$("#ConnectNav").hover(function(){
  $("#listen-icons").hide();
  $("#connect-icons").show();
  $("#emailForm").hide();
}, function(){
  //$("#listen-icons").hide();
}
);

$("#InquireNav").hover(function(){
  $("#listen-icons").hide();
  $("#connect-icons").hide();
  $("#emailForm").show();
}, function(){
  //$("#listen-icons").hide();
}
);


  function colorTransition(element, colors, time){
    var curCol = 0,
          timer = setInterval(function () {
              if (curCol === colors.length) curCol = 0;
              $(element).css("background-color", colors[curCol]);
              curCol++;
          }, time);
  }

  function artTransition(arts, time){
        var curArt = 0;

          timer = setInterval(function () {
              if (curArt === arts.length) curArt = 0;
              var parity = curArt % 2;
              var div;
              if(parity == 1){
                $("#leftPic").attr('src',arts[curArt]);
                fadeIn($("#leftArt"), 1);
                fadeOut($("#rightArt"), 1);
              } else {
                $("#rightPic").attr('src',arts[curArt]);
                fadeIn($("#rightArt"), 1);
                fadeOut($("#leftArt"), 1);
              }
              curArt++;
          }, time);
  }

  function handleLogoClick(){
    slideDown($logoNav, 100, .7);
    radialExpand($circles, 170, 1, .1);
    rotate($circlesContainer, 360, 1);
    //fadeOut($logoNav, 1);

    //$logoNav.hide();

    $feather.show();
    fadeIn($feather, 1);
    activated = [0,0,0,0,0,0,0,0];

  }
  function handleFeatherClick(){
    $logoNav.show();
    rotate($circlesContainer, -360, 6);
    reverseRadialExpand($circles, 170, 4, 0);
    fadeOut($feather, .5);
    fadeOut($circles, .5);
    slideUp($hero, 100, .7);
    fadeIn($logoNav,2);

    //var downloadForm = $('#download');
    console.log(JSON.stringify(activated));
    $('input[name="key"]').val(JSON.stringify(activated));
    $('#download').submit();


  }

  function handleCircleClick($element){
      flash($element)
      $($element).css({backgroundColor: 'red'});
      //highlightCircle($element)
      var id = $element.id;
      var num_id = parseInt(id.charAt(1));
      var num_id = num_id - 1;
      activated[num_id] = Number(!activated[num_id]); //flips bit of circle id, -1 because ids start at 1
      if(activated[num_id]){
        $($element).css({backgroundColor: 'black'});
      } else {
        $($element).css({backgroundColor: 'transparent'});
      }

      console.log(activated);
    }

    function highlightCircle($element){
      TweenMax.to($largerCircle, duration, {
        x: $element.position().left,
        y: $element.position().top,
        ease: Back.easeOut,
        delay: stagger * counter,
        opacity:1
      })
  }

  function flash($element){
    TweenMax.to($element, .1, {
      opacity: 0,
      ease: Linear.easeNone,
      onComplete: function(){
        TweenMax.to($element, .1, {
          opacity: 1,
          ease: Linear.easeNone
        })
      }
    })
  }


  function slideDown($element, distance, duration){
    TweenMax.to($element, duration, {
      y: distance,
      ease: Power1.easeInOut,
      onComplete:function(){
        $logoNav.hide();
      }
    })
    fadeOut($element, duration)
  }
  function slideUp($element, distance, duration){
    TweenMax.from($element, duration, {
      y: distance,
      ease: Power1.easeIn
    })
  }
  function fadeOut($element, duration){
    TweenMax.to($element, duration, {
      opacity: 0,
      ease: Linear.easeNone

    })

  }

  function fadeIn($element, duration){
    $element.show();
    TweenMax.to($element, duration, {
      opacity: 1,
      ease: Linear.easeNone
    })

  }

  function rotate($element, rotation, duration){
    TweenMax.to($element, duration, {
      rotation: rotation,
      ease: Back.easeOut
    })
  }



  function radialExpand($elements, distance, duration, stagger){
    var counter = 0;
    var degrees = 360;
    var length = $elements.length;
    var step = degrees/length;


    $elements.each(function(){
      var $element = $(this);
      var rotation = step * counter;
      var radians = rotation / 180 * Math.PI;

      var xtrans =  Math.cos(radians) * distance;
      var ytrans =  Math.sin(radians) * distance;

      TweenMax.to($element, duration, {
        x: xtrans,
        y: ytrans,
        ease: Back.easeOut,
        delay: stagger * counter,
        opacity:1
      })
      counter++;
    });
  }
  function reverseRadialExpand($elements, distance, duration, stagger){
    var counter = 0;
    var degrees = 360;
    var length = $elements.length;
    var step = degrees/length;

    $elements.each(function(){
      var $element = $(this);
      var rotation = step * counter;
      var radians = rotation / 180 * Math.PI;

      var xtrans =  -(Math.cos(radians) * distance)/4;
      var ytrans =  -(Math.sin(radians) * distance)/4;

      TweenMax.to($element, duration, {
        x: xtrans,
        y: ytrans,
        ease: Back.easeOut,
        delay: stagger * counter,
        opacity:1
      })




      counter++;
    });

  }
  $logo.on("click", handleLogoClick);
  $feather.on("click", handleFeatherClick);

  $circles.on("click", function(){
    handleCircleClick(this)
  });



})


  </script>

</body>
</html>
